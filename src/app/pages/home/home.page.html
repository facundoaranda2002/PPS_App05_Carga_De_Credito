
<ion-content [fullscreen]="true">
  @if(this.authService.currentUserSig())
  {
    @defer{
      <ion-fab slot="fixed" vertical="bottom" horizontal="end">
        <ion-fab-button (click)="logout()">
          <ion-icon name="arrow-back-outline" color="black"></ion-icon>
        </ion-fab-button>
      </ion-fab>
  
      <!-- Segmento -->
      <ion-segment [(ngModel)]="segment" color="black">
        <ion-segment-button value="scan">
          <ion-label></ion-label>
        </ion-segment-button>
      </ion-segment>
      <!-- Scanear QR -->
      @if(segment == "scan"){
      <div class="segment">
        <div class="segment-content">
          <ion-button class="gif" (click)="scanearCreditos()"><iframe src="https://lottie.host/embed/73aaa514-4856-4c4a-8713-6ebf9d7f6bf9/iZ7Q9zFfpA.json"></iframe></ion-button>
          <div class="arrow"><ion-icon name="arrow-up-outline"></ion-icon></div>
          <h6 class="scan-label">Presiona para escanear</h6>
          <!--
          <ion-row>
            <ion-col size="12">
              <ion-button
                (click)="scanearCreditos()"
                class="submit"
                expand="block"
              >
                Presiona para escanear el código
                <ion-icon slot="end" name="scan-outline"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
          -->
        </div>
      </div>
      }
      <div class="credit">Créditos: {{creditos}}</div>
      <div class="btnBorrar">
        <ion-button (click)="borrarCreditos()" color="secondary">
          Eliminar Créditos
        </ion-button>
      </div>
      <!-- Toast -->
      <ion-toast
        position="top"
        positionAnchor="header"
        color="success"
        [isOpen]="isToastOpenCorrecto"
        message="Los créditos han sido agregados a su cuenta"
        [duration]="3000"
        (didDismiss)="setOpenCorrecto(false)"
      ></ion-toast>
      <ion-toast
        position="top"
        positionAnchor="header"
        color="success"
        [isOpen]="isToastOpen"
        message="Sus créditos han sido eliminados"
        [duration]="3000"
        (didDismiss)="setOpen(false)"
      ></ion-toast>
      <ion-toast
        position="top"
        positionAnchor="header"
        color="warning"
        [isOpen]="isToastOpenCodigoInvalido"
        message="El código que está tratando de escanear no es valido"
        [duration]="3000"
        (didDismiss)="setOpenCodigoInvalido(false)"
      ></ion-toast>
      <ion-toast
        position="top"
        positionAnchor="header"
        color="warning"
        [isOpen]="isToastOpenCantidad"
        message="No puede volver a ingresar este código"
        [duration]="3000"
        (didDismiss)="setOpenCantidad(false)"
      ></ion-toast>
    }
    @placeholder {
      <ion-spinner class="spinner" color="danger"></ion-spinner>
    } @loading (minimum 2s) {
      <ion-spinner class="spinner" color="danger"></ion-spinner>  
    }
  }
  @else {
    <div align="center">
      <ion-img src="assets/iconapp05.png"></ion-img>
    </div>
  
    <ion-grid>
      <p align="center">
        <ion-label color="primary">
          <strong>Carga <ion-text color="danger">Crédito</ion-text></strong>
        </ion-label>
      </p>
      <ion-row>
        <ion-col>
          <ion-button size="large" expand="block" shape="round" color="primary" (click)="goLogin()">
            <ion-text>Ingresar</ion-text>
          </ion-button>
        </ion-col>
        <ion-col>
          <ion-button size="large" expand="block" shape="round" color="secondary" (click)="goRegister()">
            <ion-text>Registrarse</ion-text>
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  }
  
</ion-content>

